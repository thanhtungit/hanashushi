!function(){var a,b,c,d,e=0,f=["ms","moz","webkit","o"];for(d=0;d<f.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[f[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[d]+"CancelAnimationFrame"]||window[f[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d,f){return a=(new Date).getTime(),b=Math.max(0,16-(a-e)),c=window.setTimeout(function(){d(a+b)},b),e=a+b,c}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a,b,c,d){function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="haParallax",g={speedFactor:8};a.extend(e.prototype,{init:function(){var c=this;this.build(this.element,this.settings),c.update(a(b).scrollTop()),c.imgStretch(),a(b).resize(function(){c.update(a(b).scrollTop()),c.imgStretch()}).resize(),a(b).scroll(function(){c.update(a(b).scrollTop()),c.translate(a(b).scrollTop())}),a(b).load(function(){c.setNaturalImgDimensionsData(),c.imgStretch()})},build:function(){if(a(this.element).css("background-image")){var c=a(b).scrollTop(),d=a(this.element),e=d.index(),f=d.outerHeight()+1,g=d.offset().top-c,h=d.css("background-image").replace("url(","").replace(")","").replace('"',""),i=a('<div style="z-index:0;width:100%;top: 0;position:fixed;overflow:hidden;" class="parallax-bg" data-holder-index="'+e+'"><img style="max-width: none;width:100%;height:auto;position: fixed;top:0;left:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;" id="parallax-bg-img-'+e+'" src="'+h+'"></div>');a("body").prepend(i),d.attr("data-section-index",e),d.attr("data-top",Math.floor(d.offset().top)),d.css({background:"none"}),i.css({height:f,transform:"translate3d(0,"+Math.floor(g)+"px,0)","-webkit-transform":"translate3d(0,"+Math.floor(g)+"px,0)"})}},update:function(c){var d=a(this.element),e=d.data("section-index"),f=a('.parallax-bg[data-holder-index="'+e+'"]'),g=(a(b).height(),d.height()+1),h=d.offset().top-c;f.css({height:g,transform:"translate3d(0,"+Math.floor(h)+"px,0)","-webkit-transform":"translate3d(0,"+Math.floor(h)+"px,0)"})},imgStretch:function(){var c,d=a(b).width(),e=a(this.element),f=e.data("section-index"),g=a('.parallax-bg[data-holder-index="'+f+'"]').find("img"),h=g.data("width");c=d>h?{"margin-left":0,width:"100%"}:{"margin-left":-(h-d)/2,width:h},g.css(c)},translate:function(c){var d,e=a(b).height(),f=a(this.element),g=f.data("section-index"),h=f.outerHeight(),i=f.offset().top,j=(f.data("parallax-speed")||this.settings.speedFactor)/10,k=a('.parallax-bg[data-holder-index="'+g+'"]').find("img");c>i+h||i>c+e||(d=(c-i)*j,k.css({transform:"translate3d(0,"+d+"px,0)","-webkit-transform":"translate3d(0,"+d+"px,0)"}))},setNaturalImgDimensionsData:function(){var b=a(this.element),d=b.data("section-index"),e=a('.parallax-bg[data-holder-index="'+d+'"]'),f=e.find("img").attr("id"),g=c.getElementById(f),h=g.naturalWidth,i=g.naturalHeight;e.find("img").attr("data-width",h),e.find("img").attr("data-height",i)}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"parallax_"+f)||a.data(this,"parallax_"+f,new e(this,b))}),this}}(jQuery,window,document);